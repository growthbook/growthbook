# Google Analytics Data Source

Google Analytics lets you easily track page views and events on your site.  Compared to a true data warehouse, Google Analytics has extremely limited flexibility.

## Connection Info

Growth Book uses the Google Analytics API to query your data. 

We require 3 things for this:
1.  OAuth Authorization
2.  View ID
3.  Custom Dimension Index

### OAuth Authorization

Click the green Authorize button in Growth Book and you will taken to Google where you can authorize Growth Book to have readonly access
to your Google Analytics data.

### View ID

Log into Google Analytics and go to the admin page.

Click the "View Settings" link:

![View Setting Link](/images/ga-view-settings-link.png)

You should now see the View ID:

![View Id](/images/ga-view-id.png)

### Custom Dimension Index

You need to create a Custom Dimension to track what experiment variation a user gets.

In the Google Analytics admin, click on "Custom Definitions" -> "Custom Dimensions":

![Custom Dimension Link](/images/ga-custom-dimensions-link.png)

Click the "+ NEW CUSTOM DIMENSION" button and fill out the form:

![Custom Dimension Form](/images/ga-custom-dimension-form.png)

Save by clicking Create and then click the Done button.

You should see your new custom dimension in the table now.  The "Index" column is what you need.

![Custom Dimension Table](/images/ga-custom-dimension-table.png)

## Tracking Custom Dimensions

When you bucket a user in an AB test variation, you need to pass this to Google Analytics:

```js
const dimension = 1; // Your custom dimension index
const experiment = "my-experiment-id";
const variation = 0;
ga('set', 'dimension'+dimension, experiment+":"+variation);
ga('send', 'event', 'Experiment', experiment, variation);
```

If you use our [Javascript Client Library](https://github.com/growthbook/growthbook-js), you can just specify the `ga` configuration option and we will automatically do the tracking for you.

## Goals

The built-in metrics like "Pages per Visit" or "Bounce Rate" are great, but you may want a more custom metric.  For this, you can use Goals.

If you want a metric for when a video is played, you would first fire an event on your website:

```js
ga('send', 'event', 'Video', 'play', 'cats.mp4');
```

Then, in the Google Analytics Admin:

1.  Click on "Goals"
2.  Click the "New Goal" button
3.  For goal type, select "Event" and click Continue
4.  Fill out Category = "Video" and Action = "play"
5.  Click Save and note the Goal Number (should be something between 1 and 20)

Now, when creating a metric in Growth Book, you can select "Goal X Completions" where X is your goal number.

## Limitations

You can only run 1 concurrent experiment for a single Google Analytics data source.  It is possible to create multiple data sources, each with a separate custom dimension, but this does add some complexity to the setup.

Google Analytics data is delayed by ~24 hours. This means if your experiment has a serious bug that breaks your site, you may not know about it for a while.

Lastly, you cannot create complex metrics or join to external data.

These limitations are usually ok when starting out with AB testing, but eventually you will probably want to move to a true data warehouse like Redshift.