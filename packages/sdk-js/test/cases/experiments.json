[
  [
    "default weights - 1",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0, 1] },
    1,
    true
  ],
  [
    "default weights - 2",
    { "attributes": { "id": "2" } },
    { "key": "my-test", "variations": [0, 1] },
    0,
    true
  ],
  [
    "default weights - 3",
    { "attributes": { "id": "3" } },
    { "key": "my-test", "variations": [0, 1] },
    0,
    true
  ],
  [
    "default weights - 4",
    { "attributes": { "id": "4" } },
    { "key": "my-test", "variations": [0, 1] },
    1,
    true
  ],
  [
    "default weights - 5",
    { "attributes": { "id": "5" } },
    { "key": "my-test", "variations": [0, 1] },
    1,
    true
  ],
  [
    "default weights - 6",
    { "attributes": { "id": "6" } },
    { "key": "my-test", "variations": [0, 1] },
    1,
    true
  ],
  [
    "default weights - 7",
    { "attributes": { "id": "7" } },
    { "key": "my-test", "variations": [0, 1] },
    0,
    true
  ],
  [
    "default weights - 8",
    { "attributes": { "id": "8" } },
    { "key": "my-test", "variations": [0, 1] },
    1,
    true
  ],
  [
    "default weights - 9",
    { "attributes": { "id": "9" } },
    { "key": "my-test", "variations": [0, 1] },
    0,
    true
  ],
  [
    "uneven weights - 1",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    1,
    true
  ],
  [
    "uneven weights - 2",
    { "attributes": { "id": "2" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    1,
    true
  ],
  [
    "uneven weights - 3",
    { "attributes": { "id": "3" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    0,
    true
  ],
  [
    "uneven weights - 4",
    { "attributes": { "id": "4" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    1,
    true
  ],
  [
    "uneven weights - 5",
    { "attributes": { "id": "5" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    1,
    true
  ],
  [
    "uneven weights - 6",
    { "attributes": { "id": "6" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    1,
    true
  ],
  [
    "uneven weights - 7",
    { "attributes": { "id": "7" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    0,
    true
  ],
  [
    "uneven weights - 8",
    { "attributes": { "id": "8" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    1,
    true
  ],
  [
    "uneven weights - 9",
    { "attributes": { "id": "9" } },
    { "key": "my-test", "variations": [0, 1], "weights": [0.1, 0.9] },
    1,
    true
  ],
  [
    "coverage - 1",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    0,
    false
  ],
  [
    "coverage - 2",
    { "attributes": { "id": "2" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    0,
    true
  ],
  [
    "coverage - 3",
    { "attributes": { "id": "3" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    0,
    true
  ],
  [
    "coverage - 4",
    { "attributes": { "id": "4" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    0,
    false
  ],
  [
    "coverage - 5",
    { "attributes": { "id": "5" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    1,
    true
  ],
  [
    "coverage - 6",
    { "attributes": { "id": "6" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    0,
    false
  ],
  [
    "coverage - 7",
    { "attributes": { "id": "7" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    0,
    true
  ],
  [
    "coverage - 8",
    { "attributes": { "id": "8" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    1,
    true
  ],
  [
    "coverage - 9",
    { "attributes": { "id": "9" } },
    { "key": "my-test", "variations": [0, 1], "coverage": 0.4 },
    0,
    false
  ],
  [
    "three way test - 1",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    2,
    true
  ],
  [
    "three way test - 2",
    { "attributes": { "id": "2" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    0,
    true
  ],
  [
    "three way test - 3",
    { "attributes": { "id": "3" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    0,
    true
  ],
  [
    "three way test - 4",
    { "attributes": { "id": "4" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    2,
    true
  ],
  [
    "three way test - 5",
    { "attributes": { "id": "5" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    1,
    true
  ],
  [
    "three way test - 6",
    { "attributes": { "id": "6" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    2,
    true
  ],
  [
    "three way test - 7",
    { "attributes": { "id": "7" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    0,
    true
  ],
  [
    "three way test - 8",
    { "attributes": { "id": "8" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    1,
    true
  ],
  [
    "three way test - 9",
    { "attributes": { "id": "9" } },
    { "key": "my-test", "variations": [0, 1, 2] },
    0,
    true
  ],
  [
    "test name - my-test",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0, 1] },
    1,
    true
  ],
  [
    "test name - my-test-3",
    { "attributes": { "id": "1" } },
    { "key": "my-test-3", "variations": [0, 1] },
    0,
    true
  ],
  [
    "empty id",
    { "attributes": { "id": "" } },
    { "key": "my-test", "variations": [0, 1] },
    0,
    false
  ],
  [
    "missing id",
    { "attributes": {} },
    { "key": "my-test", "variations": [0, 1] },
    0,
    false
  ],
  [
    "missing attributes",
    {},
    { "key": "my-test", "variations": [0, 1] },
    0,
    false
  ],
  [
    "single variation",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0] },
    0,
    false
  ],
  [
    "negative forced variation",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0, 1], "force": -8 },
    0,
    false
  ],
  [
    "high forced variation",
    { "attributes": { "id": "1" } },
    { "key": "my-test", "variations": [0, 1], "force": 25 },
    0,
    false
  ],
  [
    "force variation from overrides",
    {
      "attributes": { "id": "6" },
      "overrides": {
        "forced-test": { "force": 1 }
      }
    },
    { "key": "forced-test", "variations": [0, 1] },
    1,
    false
  ],
  [
    "coverage from overrides",
    {
      "user": { "id": "1" },
      "overrides": {
        "my-test": {
          "coverage": 0.01
        }
      }
    },
    {
      "key": "my-test",
      "variations": [0, 1]
    },
    0,
    false
  ],
  [
    "coverage from overrides",
    {
      "user": { "id": "1" },
      "overrides": {
        "my-test": {
          "coverage": 0.01
        }
      }
    },
    {
      "key": "my-test",
      "variations": [0, 1]
    },
    0,
    false
  ],
  [
    "evaluates conditions - pass",
    {
      "attributes": {
        "id": "1",
        "browser": "firefox"
      }
    },
    {
      "key": "my-test",
      "variations": [0, 1],
      "condition": {
        "browser": "firefox"
      }
    },
    1,
    true
  ],
  [
    "evaluates conditions - fail",
    {
      "attributes": {
        "id": "1",
        "browser": "chrome"
      }
    },
    {
      "key": "my-test",
      "variations": [0, 1],
      "condition": {
        "browser": "firefox"
      }
    },
    0,
    false
  ],
  [
    "custom hashAttribute",
    {
      "attributes": {
        "id": "2",
        "companyId": "1"
      }
    },
    {
      "key": "my-test",
      "variations": [0, 1],
      "hashAttribute": "companyId"
    },
    1,
    true
  ],
  [
    "globally disabled",
    {
      "attributes": {
        "id": "1"
      },
      "enabled": false
    },
    {
      "key": "my-test",
      "variations": [0, 1]
    },
    0,
    false
  ],
  [
    "querystring force",
    {
      "attributes": {
        "id": "1"
      },
      "url": "http://example.com?forced-test-qs=1#someanchor"
    },
    {
      "key": "forced-test-qs",
      "variations": [0, 1]
    },
    1,
    false
  ],
  [
    "run active experiments",
    {
      "attributes": {
        "id": "1"
      }
    },
    {
      "key": "my-test",
      "active": true,
      "variations": [0, 1]
    },
    1,
    true
  ],
  [
    "skip inactive experiments",
    {
      "attributes": {
        "id": "1"
      }
    },
    {
      "key": "my-test",
      "active": false,
      "variations": [0, 1]
    },
    0,
    false
  ],
  [
    "querystring force with inactive",
    {
      "attributes": {
        "id": "1"
      },
      "url": "http://example.com/?my-test=1"
    },
    {
      "key": "my-test",
      "active": false,
      "variations": [0, 1]
    },
    1,
    false
  ],
  [
    "ignore outside coverage when forced",
    {
      "attributes": {
        "id": "1"
      }
    },
    {
      "key": "my-test",
      "force": 1,
      "coverage": 0.01,
      "variations": [0, 1]
    },
    0,
    false
  ],
  [
    "JSON values for experiments",
    {
      "attributes": {
        "id": "1"
      }
    },
    {
      "key": "my-test",
      "variations": [
        {
          "color": "blue",
          "size": "small"
        },
        {
          "color": "green",
          "size": "large"
        }
      ]
    },
    {
      "color": "green",
      "size": "large"
    },
    true
  ],
  [
    "Force variation from context",
    {
      "attributes": { "id": "1" },
      "forcedVariations": { "my-test": 0 }
    },
    {
      "key": "my-test",
      "variations": [0, 1]
    },
    0,
    false
  ],
  [
    "Skips experiments in QA mode",
    {
      "attributes": { "id": "1" },
      "qaMode": true
    },
    {
      "key": "my-test",
      "variations": [0, 1]
    },
    0,
    false
  ],
  [
    "Works in QA mode if forced in context",
    {
      "attributes": { "id": "1" },
      "qaMode": true,
      "forcedVariations": { "my-test": 1 }
    },
    {
      "key": "my-test",
      "variations": [0, 1]
    },
    1,
    false
  ],
  [
    "Works in QA mode if forced in experiment",
    {
      "attributes": { "id": "1" },
      "qaMode": true
    },
    {
      "key": "my-test",
      "variations": [0, 1],
      "force": 1
    },
    1,
    false
  ],
  [
    "Experiment namespace - pass",
    {
      "attributes": {
        "id": "1"
      }
    },
    {
      "key": "my-test",
      "variations": [0, 1],
      "namespace": ["namespace", 0.1, 1]
    },
    1,
    true
  ],
  [
    "Experiment namespace - fail",
    {
      "attributes": {
        "id": "1"
      }
    },
    {
      "key": "my-test",
      "variations": [0, 1],
      "namespace": ["namespace", 0, 0.1]
    },
    0,
    false
  ]
]
