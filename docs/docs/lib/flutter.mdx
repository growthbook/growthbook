---
title: Flutter SDK
description: Flutter SDK for GrowthBook
sidebar_label: Flutter
slug: flutter
---

import SdkResources from '@site/src/components/SdkResources';
import SdkSupportedFeatures from '@site/src/components/SdkSupportedFeatures';

# Flutter

This SDK supports the following versions:

- **Android version 21 & above**
- **iOS version 12 & Above**
- **Apple TvOS version 13 & Above**
- **Apple WatchOS version 7 & Above**

<SdkResources sdk="flutter" />

## Installation

Add this to your `pubspec.yaml` file

```yaml
growthbook_sdk_flutter: ^4.0.0
```

## Quick Usage

Create a `GrowthBookSDK` instance with `GBSDKBuilderApp`, set attributes, then evaluate features or run experiments.

```dart
final sdk = await GBSDKBuilderApp(
  apiKey: "sdk-abc123", // Client key from GrowthBook
  hostURL: "https://cdn.growthbook.io", // or your Proxy URL
  attributes: {
    "id": "123",
    "env": "dev",
    "betaUser": true,
  },
  growthBookTrackingCallBack: (exp, result) {
    // Track exposures
  },
).initialize();

final feature = sdk.feature("my-feature");
if (feature.on) {
  // Feature is enabled
}
```

## Using Features

The `feature` method takes a String feature name and returns a `GBFeatureResult` object with a few useful properties:

- **value** (`dynamic`) - The assigned value of the feature
- **on** (`bool`) - The value cast to a boolean
- **off** (`bool`) - The value cast to a boolean and then negated
- **source** (`String`) - Why the value was assigned to the user. One of "unknownFeature", "defaultValue", "force", or "experiment"

When the source is "experiment", there are 2 additional properties that tell you which experiment was used and more details about the result of the experiment:

- **experiment** (`GBExperiment`)
- **experimentResult** (`GBExperimentResult`)

Here are some examples:

```dart
GBFeatureResult feature = gb.feature("my-feature")

// Do something if feature is truthy
if (feature.on) { }

// Do something if feature is falsy
if (feature.off) { }

// Print the actual value of the feature
// (depending on the feature, might be a string, number, boolean, etc.)
print(feature.value)

// Print the experiment id used to assign the feature value
if (feature.source == "experiment") {
  Println(feature.experiment.key)
}
```

## Running Inline Experiments

Instead of just using features defined in the GrowthBook API, you can run an experiment directly. This is done with the `run` method, which takes a `GBExperiment` object as an argument and returns a `GBExperimentResult` object:

```dart
var exp = GBExperiment()
exp.key = "my-experiment"
exp.variations = List.of("control", "variation")

var result = gb.run(exp)

// Either "control" or "variation"
print(result.value)
```

The `GBExperiment` class has two required properties - `key` and `variations`. There are also a number of optional properties:

- **key** (`String`) - The unique identifier for this experiment
- **variations** (`dynamic[]`) - Array of variations to decide between
- **weights** (`double[]`) - How to weight traffic between variations. Must add to 1.
- **active** (`bool`) - If set to false, always return the control (first variation)
- **coverage** (`double`) - What percent of users should be included in the experiment (between 0 and 1, inclusive)
- **condition** (`GBCondition`) - Optional targeting condition
- **namespace** (`[String, int, int]`) - Adds the experiment to a namespace
- **force** (`int`) - All users included in the experiment will be forced into the specific variation index
- **hashAttribute** (`String`) - What user attribute should be used to assign variations (defaults to `id`)

The `GBExperimentResult` object returns the following properties:

- **inExperiment** (`bool`)
- **variationId** (`int`) - The array index of the assigned variation
- **value** (`dynamic`) - The value of the assigned variation
- **hashAttribute** (`String`) - The user attribute used to assign a variation
- **hashValue** (`String`) - The value of the attribute used to assign a variation

## Loading Features

### Built-in fetching and caching

If you pass a `hostURL` and `apiKey` into the builder, the SDK handles network requests, caching, retry/backoff, and decryption (when configured in your SDK connection). You can enable streaming updates with `backgroundSync: true`.

```dart
final sdk = await GBSDKBuilderApp(
  apiKey: "sdk-abc123",
  hostURL: "https://cdn.growthbook.io",
  backgroundSync: false,
).initialize();

// Manually refresh (e.g., on app start or navigation)
await sdk.refreshCache();
```

### Custom integration (local evaluation)

If you prefer to control network and caching yourself, you can set a payload directly on the SDK. This enables fully local evaluation and offline-first behavior.

```dart
await sdk.setPayload({
  "features": {
    "feature-1": {"defaultValue": true},
    "feature-2": {"defaultValue": "blue"}
  }
});
```

## Remote Evaluation

Run GrowthBook in Remote Evaluation mode to evaluate flags on a private server (e.g., GrowthBook Proxy). Sensitive rules never reach the client.

```dart
final sdk = await GBSDKBuilderApp(
  apiKey: "sdk-abc123",
  hostURL: "https://gb-proxy.yourcompany.com",
  remoteEval: true,
  // Optional: only trigger a new evaluation when selected attributes change
  cacheKeyAttributes: ["id", "email"],
  attributes: {"id": "123", "email": "user@example.com"},
).initialize();

// Manually trigger a remote evaluation when attributes change
sdk.setAttributes({"plan": "pro"});
await sdk.refreshForRemoteEval();
```

:::note
If you want Sticky Bucketing with Remote Evaluation, configure your remote backend (e.g., GrowthBook Proxy) with a persistent store (e.g., Redis). You do not need to provide a sticky service on the client.
:::

## Real-time Updates (SSE)

Enable `backgroundSync: true` to receive feature updates in real time via SSE. The SDK reconnects automatically when network conditions change.

```dart
final sdk = await GBSDKBuilderApp(
  apiKey: "sdk-abc123",
  hostURL: "https://cdn.growthbook.io",
  backgroundSync: true,
).initialize();
```

You can also add custom headers for secure requests:

```dart
final sdk = await GBSDKBuilderApp(
  apiKey: "sdk-abc123",
  hostURL: "https://cdn.growthbook.io",
  requestHeaders: {"Authorization": "Bearer <token>"},
  streamingRequestHeaders: {
    "Authorization": "Bearer <token>",
    // Optionally resume after disconnects
    "Last-Event-Id": "<persisted-last-id>"
  },
  backgroundSync: true,
).initialize();
```

## Sticky Bucketing

Sticky bucketing ensures users see the same experiment variant across sessions. Implement a `GBStickyBucketService` to persist assignments.

```dart
class MyAppStickyBucketService extends GBStickyBucketService {
  @override
  Future<Map<String, String>?> getAllAssignments(
    Map<String, dynamic> attributes,
  ) async {
    // Retrieve from local storage
    // ...
    return null;
  }

  @override
  Future<void> saveAssignments(
    Map<String, dynamic> attributes,
    Map<String, String> assignments,
  ) async {
    // Save to local storage
    // ...
  }
}

final sdk = await GBSDKBuilderApp(
  apiKey: "sdk-abc123",
  stickyBucketService: MyAppStickyBucketService(),
).initialize();
```

See the Flutter repo for examples and updates: [growthbook-flutter](https://github.com/growthbook/growthbook-flutter).

## Attributes

Attributes drive targeting and bucketing. Update when the user context changes.

```dart
sdk.setAttributes({
  "id": "123",
  "country": "US",
  "plan": "pro",
});
```

## Experimentation (A/B Testing)

Provide a tracking callback to record experiment exposures.

```dart
final sdk = await GBSDKBuilderApp(
  apiKey: "sdk-abc123",
  hostURL: "https://cdn.growthbook.io",
  growthBookTrackingCallBack: (exp, result) {
    // e.g., send to analytics
  },
).initialize();
```

## More Documentation

- Flutter SDK repo: `https://github.com/growthbook/growthbook-flutter`
- React Native reference: `https://docs.growthbook.io/lib/react-native`

## Supported Features

<SdkSupportedFeatures sdk="flutter" />
