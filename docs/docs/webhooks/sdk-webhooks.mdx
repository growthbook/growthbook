---
title: SDK Webhooks
sidebar_label: SDK Webhooks
slug: /app/webhooks/sdk-webhooks
---

# SDK Webhooks

GrowthBook has SDK-based webhooks that trigger a script on your server whenever something changes within GrowthBook which will affect that SDK.

## Adding a Webhook

When logged into GrowthBook as an admin, navigate to **SDK Connections** .

Under the SDK Webhooks section you can add a webhook endpoint and select with method you would like to be notified with `POST,PUT,GET,DELETE,PURGE`.

Once a SDK webhook is created you will be able to view the secret and when the last time it was fired as well as if there was an error.

### VPCs and Firewalls

If your webhook endpoint is behind a firewall and you are using GrowthBook Cloud, make sure to whitelist the ip address `52.70.79.40`.

## Verify Signatures

Webhook payloads are signed with a shared secret so that you can verify they actually originate from GrowthBook.
The signature is included in a webhook-secret header. We use the whsec\_ prefix to help identify your crypto method.
For example, webhook-secret: "whsec_iM0hCLU0fZc885zfkFPX3UJwSHbYyam9ji0WglnT3fc=".

The signature is generated using HMAC SHA-256 hash of the payload, with the secret serving as the key.
This secret is generated when you create a webhook, and you can locate it in the GrowthBook app under SDK Connections.

```
const crypto = require("crypto");
const express = require("express");
const bodyParser = require("body-parser");

// Retrieve from GrowthBook settings
const GROWTHBOOK_WEBHOOK_SECRET = "abc123";

const port = 1337;
const app = express();

app.post(
  "/webhook",
  bodyParser.raw({ type: "application/json" }),
  (req, res) => {
		//if there is no payload sent the hash is based on an empty string
    const payload = req.body?.data?.payload || new Buffer("");
    const received = req.get("webhook-secret");
    if (received && received.startsWith("whsec_")) {
      const signingKey = received.split("whsec_")[1];
      const computed = crypto
        .createHmac("sha256", signingKey || "")
        .update(payload)
        .digest("hex");

      if (
        !crypto.timingSafeEqual(Buffer.from(computed), Buffer.from(signingKey))
      ) {
        throw new Error("mismatch signatures");
      }
    } else {
      throw new Error("invalid secret");
    }

    const data = JSON.parse(payload);
// TODO: Do something with the webhook data

// Make sure to respond with a 200 status code
    res.status(200).send("");
  }
);

app.listen(port, () => {
  console.log(`Webhook endpoint listening on port ${port}`);
});
```

## **Errors and Retries**

If your endpoint returns any HTTP status besides `200`, the webhook will be considered failed.

Failed webhooks are tried a total of 3 times using an exponential back-off between attempts.

You can view the status of your webhooks in the GrowthBook app under **SDK Connections** .

## Supported HTTP Types

- **POST**
- **PUT**
- **GET**
- **DELETE**
- **PURGE**

### Sending Payload

SDK Webhooks will send the payload to the endpoint **except GET.** In body is a JSON object containing feature definitions in the same format that SDKs are expecting.

Here's an example payload:

```json
{
	"type": "payload.changed",
	"timestamp": "2024-04-03T01:54:20.449Z",
	"data":{
		"payload":{
		  "timestamp": 1625098156,
		  "features": {
		    "feature1": {
		      "defaultValue": true
		    }
		  }
		}
	}
}
```

The`features`field has one entry per feature definition. Features can have the following properties:

- **defaultValue**
- **rules[]** - Array of feature rules
  - **condition** - A JSON condition using MongoDB query syntax
  - **force** - Force a specific value, takes precedence over all other rules besides `condition`
  - **variations[]** - Run an experiment and randomly assign one of the specified variations
  - **key** - When running an experiment, this is the experiment key that will be passed to the tracking callback function
  - **weights[]** - Determines how traffic is split between variations in an experiment
  - **coverage** - Specifies what sampling rate (0 to 1) to use for including users in an experiment. A rate of `1` means everyone is included. A rate of `0` means no one is.
