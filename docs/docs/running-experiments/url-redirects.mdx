---
title: URL Redirect Testing
description: Easily A/B test multiple versions of a page without writing code
sidebar_label: URL Redirects
slug: /app/url-redirects
---

import Pill from '@site/src/components/Pill';

# URL Redirect Testing

URL Redirect tests are an alternative to using the Visual Editor and are ideal for testing big changes or complete page redesigns.

URL Redirects require a Pro or Enterprise GrowthBook license.

## How it Works

You start by specifying an "Original URL". Users who visit this URL will be included in the experiment (assuming they meet all of the other targeting conditions).

You then specify "Destination URLs" for each of your variations. You can also turn off redirects for some of your variations if you want to keep the user on the Original URL.

When a user visits the Original URL and is included in the experiment, they will be assigned a variation. Then, an "Experiment Viewed" event will be sent to your data warehouse. After a short delay (default `100ms`) to allow for the tracking event to finish, the user will be redirected to the destination URL.

### Redirecting when only query params change

Setting up tests where the redirect URL only varies from the original by the query parameters requires special consideration. You'll need to include the query params you plan to use in the original URL with no value entered in order for our URL targeting to work correctly (i.e. if you want to redirect a user to `http://www.growthbook.io/test?abc=123` from `http://www.growthbook.io/test`, your original URL will need to be `http://www.growthbook.io/test?abc`).

## Implementation

URL Redirect tests require integrating one of our [SDKs](/lib) into your application. Currently, URL Redirect tests are only supported in our [Script Tag](/lib/script-tag), [Javascript](/lib/js), and [ReactJS](/lib/js) SDKs. Support for other SDKs is coming soon. Verify URL Redirect tests are enabled for your SDK Connection: Go to **SDK Connections**, select your SDK connection, click **Edit**, and ensure that "Enable URL Redirect experiments" is toggled on.

### HTML Script Tag

The easiest option is to use our [Script Tag](/lib/script-tag) SDK. This involves adding a single `<script>` tag to the HEAD of your website. This option fully works out-of-the-box with no configuration required.

### Client-Side JavaScript and React

A more advanced integration involves using our [Javascript](/lib/js) or [ReactJS](/lib/js) client-side SDKs.

Besides the standard implementation described in the SDK docs, there are 4 additional settings that control the redirect behavior.

- `navigate` - a callback function to perform the redirect. Defaults to `(url) => window.location.replace(url)`.
- `navigateDelay` - the number of milliseconds to wait before redirecting. Use this to give time for your analytics tracking callback to finish. Defaults to `100`
- `antiFlicker` - If `true`, a white screen will be shown while the redirect is happening to avoid the user seeing a "flicker". Defaults to `false`.
- `antiFlickerTimeout` - the maximum number of milliseconds that the anti-flicker white screen will be shown. Defaults to `3500` (3.5 seconds).

#### Single Page Apps (SPAs)

If you have a Single Page App (SPA), it's recommended to use your own `navigate` function to avoid doing full-page redirects. In this case, you also want to set `navigateDelay` to 0. Here's an example in Next.js

```jsx
import router from "next/router";

const gb = new GrowthBook({
    navigate: (url) => router.replace(url),
    navigateDelay: 0,
    // ... other settings
});
```

It's also super important to update the URL in the GrowthBook instance on every client-side navigation. For example:

```jsx
router.events.on("routeChangeComplete", (url) => {
    gb.setURL(url);
})
```

### Node.js / Edge Workers <Pill>beta</Pill>

It's possible to use our [Javascript](/lib/js) SDK to perform redirects on the back-end as well, in either a Node.js application or in an edge worker.

Reach out to us on Slack or at hello@growthbook.io if you're interested in helping us beta test this and we can help you get set up.

## Sample Ratio Mismatch (SRM) Warnings on URL Redirect Tests

[Sample Ratio Mismatch (SRM) warnings](https://docs.growthbook.io/using/experimenting#sample-ratio-mismatch-srm) happen when the actual traffic split in an experiment is significantly different from the traffic split configured for the experiment. For instance, if a 50/50 traffic split was configured for an experiment but a significantly different traffic split is observed, like a 46/54 split, an SRM warning will be triggered.

GrowthBook only shows SRM warnings if the p-value is less than 0.001, which means it's extremely unlikely to occur by chance. This p-value threshold is customizable in **Settings** → **General** → **Experiment 
Settings** → **Experiment Health Settings**.

### Why Am I Seeing SRM Warnings on My URL Redirect Test?

SRM warnings are a common problem when running client-side URL Redirect tests, regardless of what experimentation platform is used. When using GrowthBook's [JavaScript](https://docs.growthbook.io/lib/js), [React](https://docs.growthbook.io/lib/react), [Vue.js](https://docs.growthbook.io/lib/vue), or [HTML](https://docs.growthbook.io/lib/script-tag) SDKs to run URL Redirect tests, SRM warnings may occur. The issue is especially pronounced while also using [Google Tag Manager (GTM)](https://docs.growthbook.io/guide/google-tag-manager-and-growthbook).

The inherent latency of the [trackingCallback](https://docs.growthbook.io/lib/js#experimentation-ab-testing) causes the URL Redirect to take place before the `trackingCallback` can complete, which means tracking more exposures to the control URL than to the redirect URL. Thus, it's likely that significantly more traffic will be sent to the control URL than what was configured for the experiment, which triggers an SRM warning.

### Increase the Delay Before Triggering a URL Redirect

GrowthBook minimizes the effects of this as much as possible in our client-side SDKs. If SRM warnings are still appearing on client-side URL Redirect tests, the issue can be mitigated further by increasing the amount of completion time the `trackingCallback` is given. This is achieved by setting the `context.navigateDelay` to a larger number, such as 300 ms instead of the default 100ms, in accordance with our guide on [Optional Configuration Settings](https://docs.growthbook.io/lib/script-tag#optional-configuration-settings).

For some tracking libraries, such as [Google Analytics (GA4)](https://docs.growthbook.io/guide/GA4-google-analytics), GrowthBook waits until the `trackingCallback` finishes, which is usually much faster than 300 ms unless the end user is on a very slow network. For other tracking libraries, like [Segment](https://docs.growthbook.io/event-trackers/segment), we follow their suggestion to wait 300 ms.

### Avoid SRM Warnings on URL Redirect Tests by Using the Growthbook Edge SDK

If performance is critical, we recommend doing A/B testing using Edge Workers instead of on the client. We have Edge SDK examples for [Cloudflare Workers](https://docs.growthbook.io/lib/edge/cloudflare), [Fastly Compute](https://docs.growthbook.io/lib/edge/fastly), and [AWS Lambda@Edge](https://docs.growthbook.io/lib/edge/lambda).
